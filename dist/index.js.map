{"version":3,"file":"index.js","sources":["../src/tools.js","../src/meta/generator.js","../src/meta/clear.js","../src/http-serve.js","../src/deal-scripts-dependencies.js","../src/compile.js"],"sourcesContent":["/**\n * Created by rockyl on 2018/7/5.\n */\n\nimport {spawn} from 'child_process'\n\nexport function exit(err, code = 1) {\n\tconsole.error(err);\n\tprocess.exit(code);\n}\n\nexport function childProcess(cmd, params, cwd, printLog = true) {\n\treturn new Promise((resolve, reject) => {\n\t\tlet options = {};\n\t\tif (cwd) {\n\t\t\toptions.cwd = cwd;\n\t\t}\n\t\tconst proc = spawn(cmd, params, options);\n\n\t\tif (printLog) {\n\t\t\tproc.stdout.on('data', (data) => {\n\t\t\t\tlet txt = data.toString();\n\t\t\t\ttxt = txt.substr(0, txt.length - 1);\n\t\t\t\tconsole.log(txt);\n\t\t\t});\n\n\t\t\tproc.stderr.on('data', (data) => {\n\t\t\t\tconsole.log(data.toString());\n\t\t\t});\n\t\t}\n\n\t\tproc.on('close', (code) => {\n\t\t\tif (code === 0) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\treject(code);\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport function gitClone(url, path) {\n\treturn childProcess('git', ['clone', url, path]);\n}\n\nexport function npmInstall(path) {\n\treturn childProcess('npm', ['i'], path);\n}\n\nexport function npmRun(path, scriptName) {\n\treturn childProcess('npm', ['run', scriptName], path);\n}\n","/**\n * Created by rockyl on 2020-03-16.\n */\n\nimport glob from 'glob'\nimport chalk from 'chalk'\nimport fs from 'fs'\nimport {v4 as generateUUID} from \"uuid\"\nimport chokidar from 'chokidar'\nimport {exit} from \"../tools\";\n\nlet t;\n\nexport function generateMetaFiles(watch = false) {\n\tif (fs.existsSync('assets')) {\n\t\tif (watch) {\n\t\t\tconsole.log(chalk.blue('start watch assets folder to generate meta files'));\n\t\t\tchokidar.watch('assets').on('all', (event, path) => {\n\t\t\t\t//console.log(event, path);\n\t\t\t\tif (t) {\n\t\t\t\t\tclearTimeout(t);\n\t\t\t\t\tt = null;\n\t\t\t\t}\n\t\t\t\tt = setTimeout(executeOnce, 200);\n\t\t\t});\n\t\t} else {\n\t\t\texecuteOnce();\n\t\t\tconsole.log(chalk.cyan('generate meta files successfully'));\n\t\t}\n\t} else {\n\t\texit('assets folder not exists', 1);\n\t}\n}\n\nfunction executeOnce() {\n\tlet files = glob.sync('assets/**/!(*.meta)');\n\n\tfor (let file of files) {\n\t\tif (!fs.existsSync(file + '.meta')) {\n\t\t\tgenerateMetaFile(file);\n\t\t}\n\t}\n}\n\nexport function generateMetaFile(file) {\n\tlet meta = {\n\t\tver: '1.0.1',\n\t\tuuid: generateUUID(),\n\t};\n\n\tfs.writeFileSync(file + '.meta', JSON.stringify(meta, null, '\\t'));\n\n\tconsole.log(chalk.green('generate ' + file + '.meta'));\n}\n","/**\n * Created by rockyl on 2020-03-17.\n */\n\nimport glob from 'glob'\nimport chalk from 'chalk'\nimport fs from 'fs'\nimport {exit} from \"../tools\";\n\nexport function clearMetaFiles() {\n\tif (fs.existsSync('assets')) {\n\t\texecuteOnce();\n\t\tconsole.log(chalk.cyan('clear meta files successfully'));\n\t} else {\n\t\texit('assets folder not exists', 1);\n\t}\n}\n\nfunction executeOnce() {\n\tlet files = glob.sync('assets/**/*.meta');\n\n\tfor (let file of files) {\n\t\tlet bodyFile = file.replace('.meta', '');\n\t\tif (!fs.existsSync(bodyFile)) {\n\t\t\tfs.unlinkSync(file);\n\t\t\tconsole.log(chalk.green('remove ' + file + '.meta'));\n\t\t}\n\t}\n}\n","/**\n * Created by rockyl on 2020-03-17.\n */\n\nimport path from 'path'\nimport fs from 'fs'\nimport chalk from 'chalk'\nimport serveHandler from 'serve-handler'\nimport http from 'http'\nimport https from 'https'\n\nlet publicPath;\n\nfunction handler(request, response) {\n\treturn serveHandler(request, response, {\n\t\tpublic: publicPath,\n\t\theaders: [\n\t\t\t{\n\t\t\t\tsource: '**/*',\n\t\t\t\theaders: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'Access-Control-Allow-Origin', value: '*',\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n}\n\nexport function startHttpServe(options) {\n\tconsole.log(chalk.green('launching...'));\n\treturn new Promise((resolve, reject) => {\n\t\tconst {port, host, folder, keyFile, certFile} = options;\n\n\t\tpublicPath = path.resolve(folder);\n\t\tif (fs.existsSync(publicPath)) {\n\t\t\tlet sslOpts;\n\t\t\tif (keyFile && certFile) {\n\t\t\t\tconst keyContent = fs.readFileSync(keyFile, 'utf8'),\n\t\t\t\t\tcertContent = fs.readFileSync(certFile, 'utf8');\n\n\t\t\t\tif (keyContent && certContent) {\n\t\t\t\t\tsslOpts = {\n\t\t\t\t\t\tkey: keyContent,\n\t\t\t\t\t\tcert: certContent\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst server = sslOpts ? https.createServer(sslOpts, handler) : http.createServer(handler);\n\n\t\t\tserver.on('error', (err) => {\n\t\t\t\tconsole.log(chalk.red(err.message));\n\t\t\t\treject(err.message);\n\t\t\t});\n\n\t\t\tserver.listen(port, host, function () {\n\t\t\t\tlet isSSL = !!sslOpts;\n\t\t\t\tconst schema = isSSL ? 'https' : 'http';\n\n\t\t\t\tconsole.log(chalk.blue(`${schema} server start at ${schema}://${host}:${port}`));\n\t\t\t\tconsole.log(chalk.blue(`${schema} path: ${publicPath}`));\n\n\t\t\t\tresolve({\n\t\t\t\t\thost, port, publicPath, isSSL,\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.log(chalk.red('Public path is not exist: ' + publicPath));\n\t\t\treject('Public path is not exist: ' + publicPath)\n\t\t}\n\t})\n}\n","/**\n * Created by rockyl on 2020-03-16.\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst glob = require('glob');\n\nconst targetId = 'register-scripts';\n\nfunction getModuleName(file) {\n\t//let namespace = path.relative('./', file);\n\tlet metaContent = JSON.parse(fs.readFileSync(file + '.meta', 'utf-8'));\n\tlet fileContent = fs.readFileSync(file, 'utf-8');\n\tlet result = fileContent.match(/export default class (\\w+)/);\n\n\tif (result) {\n\t\treturn metaContent.uuid;\n\t}\n}\n\nfunction getScripts() {\n\tlet files = glob.sync('./assets/**/*.ts');\n\n\tlet scriptsImportList = [];\n\tlet scriptsList = [];\n\tfor (let i = 0, li = files.length; i < li; i++) {\n\t\tconst file = files[i];\n\t\tlet moduleName = getModuleName(file);\n\t\tif (moduleName) {\n\t\t\tscriptsImportList.push(`import {default as script_${i}} from \"${file}\";`);\n\t\t\tscriptsList.push(`'${moduleName}': script_${i},`);\n\t\t}\n\t}\n\n\treturn `\n${scriptsImportList.join('\\n')}\n\nexport default function register(app) {\n\tapp.registerComponentDefs({\n${scriptsList.join('\\n')}\n\t});\n}\n\t\t\t\t`;\n}\n\nexport function dealScriptsDependencies(options) {\n\treturn {\n\t\tname: 'deal-scripts-dependencies',\n\n\t\tresolveId(id) {\n\t\t\tif (id === targetId) {\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tload(id) {\n\t\t\tif (id === targetId) {\n\t\t\t\treturn getScripts();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n}\n","/**\n * Created by rockyl on 2020-03-18.\n */\n\nimport fs from 'fs'\nimport rollup from 'rollup'\nimport typescript from 'typescript'\n\nconst rpt = require('rollup-plugin-typescript');\nconst {uglify} = require('rollup-plugin-uglify');\nimport {dealScriptsDependencies} from \"./deal-scripts-dependencies\";\nimport chalk from \"chalk/source\";\nimport {exit} from \"./tools\";\n\nconst defaultOptions = {\n\tprod: false,\n\tmoduleName: 'qunity-game',\n\texternals: {\n\t\tqunity: 'qunity',\n\t},\n};\n\nconst adaptorExternalMap = {\n\tpixi: {\n\t\t'pixi.js': 'PIXI',\n\t\t'qunity-pixi': 'qunity-pixi',\n\t}\n};\n\nconst inputFile = 'src/index.ts';\n\nexport async function compile(options, watch = false) {\n\tif (!fs.existsSync('src/index.ts')) {\n\t\texit(`file [${inputFile}] not exists`, 1);\n\t}\n\tlet externals = adaptorExternalMap[options.adaptor];\n\tif (!externals) {\n\t\texit(`adaptor [${options.adaptor}] not exists`, 2);\n\t}\n\n\tif (options) {\n\t\toptions = Object.assign({}, defaultOptions, options);\n\t} else {\n\t\toptions = Object.assign({}, defaultOptions);\n\t}\n\n\tlet {prod, moduleName} = options;\n\n\texternals = Object.assign({}, externals, defaultOptions.externals);\n\n\tlet inputOptions = {\n\t\tinput: inputFile,\n\t\tplugins: [\n\t\t\tdealScriptsDependencies(),\n\t\t\trpt({\n\t\t\t\ttypescript,\n\t\t\t\tinclude: ['src/**/*.ts+(|x)', 'assets/**/*.ts+(|x)']\n\t\t\t}),\n\t\t],\n\t\texternal: Object.keys(externals),\n\t};\n\n\tif (prod) {\n\t\tinputOptions.plugins.push(uglify({}));\n\t}\n\n\tlet outputOptions = {\n\t\tfile: prod ? 'dist/bundle.min.js' : 'debug/bundle.js',\n\t\tformat: 'umd',\n\t\tname: moduleName,\n\t\tsourcemap: !prod,\n\t\tglobals: externals,\n\t};\n\n\tif (watch) {\n\t\tlet watchOptions = {\n\t\t\t...inputOptions,\n\t\t\toutput: outputOptions,\n\t\t};\n\t\tconst watcher = rollup.watch(watchOptions);\n\n\t\twatcher.on('event', event => {\n\t\t\tswitch (event.code) {\n\t\t\t\tcase 'END':\n\t\t\t\t\tconsole.log(chalk.cyan('build project successfully'));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ERROR':\n\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// event.code 会是下面其中一个：\n\t\t\t//   START        — 监听器正在启动（重启）\n\t\t\t//   BUNDLE_START — 构建单个文件束\n\t\t\t//   BUNDLE_END   — 完成文件束构建\n\t\t\t//   END          — 完成所有文件束构建\n\t\t\t//   ERROR        — 构建时遇到错误\n\t\t\t//   FATAL        — 遇到无可修复的错误\n\t\t});\n\t} else {\n\t\ttry {\n\t\t\tconst bundle = await rollup.rollup(inputOptions);\n\t\t\tawait bundle.write(outputOptions);\n\n\t\t\tconsole.log(chalk.cyan('build project successfully'));\n\t\t}catch (e) {\n\t\t\tconsole.warn(e);\n\t\t\texit('build project failed', 1);\n\t\t}\n\t}\n}\n"],"names":["spawn","fs","glob","generateUUID","executeOnce","path","chalk"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAGA;AACO,SAAS,IAAI,CAAC,GAAG,EAAE,IAAI,GAAG,CAAC,EAAE;AACpC,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACpB,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpB,CAAC;AACD;AACO,SAAS,YAAY,CAAC,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,GAAG,IAAI,EAAE;AAChE,CAAC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AACzC,EAAE,IAAI,OAAO,GAAG,EAAE,CAAC;AACnB,EAAE,IAAI,GAAG,EAAE;AACX,GAAG,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;AACrB,GAAG;AACH,EAAE,MAAM,IAAI,GAAGA,mBAAK,CAAC,GAAG,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;AAC3C;AACA,EAAE,IAAI,QAAQ,EAAE;AAChB,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,KAAK;AACpC,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC9B,IAAI,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACxC,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACrB,IAAI,CAAC,CAAC;AACN;AACA,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,KAAK;AACpC,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACjC,IAAI,CAAC,CAAC;AACN,GAAG;AACH;AACA,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,IAAI,KAAK;AAC7B,GAAG,IAAI,IAAI,KAAK,CAAC,EAAE;AACnB,IAAI,OAAO,EAAE,CAAC;AACd,IAAI,MAAM;AACV,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC;AACjB,IAAI;AACJ,GAAG,CAAC,CAAC;AACL,EAAE,CAAC,CAAC;AACJ,CAAC;AACD;AACO,SAAS,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE;AACpC,CAAC,OAAO,YAAY,CAAC,KAAK,EAAE,CAAC,OAAO,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;AAClD,CAAC;AACD;AACO,SAAS,UAAU,CAAC,IAAI,EAAE;AACjC,CAAC,OAAO,YAAY,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AACzC,CAAC;AACD;AACO,SAAS,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE;AACzC,CAAC,OAAO,YAAY,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE,IAAI,CAAC,CAAC;AACvD;;ACnDA;AACA;AACA;AAQA;AACA,IAAI,CAAC,CAAC;AACN;AACO,SAAS,iBAAiB,CAAC,KAAK,GAAG,KAAK,EAAE;AACjD,CAAC,IAAIC,IAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;AAC9B,EAAE,IAAI,KAAK,EAAE;AACb,GAAG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,kDAAkD,CAAC,CAAC,CAAC;AAC/E,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,IAAI,KAAK;AACvD;AACA,IAAI,IAAI,CAAC,EAAE;AACX,KAAK,YAAY,CAAC,CAAC,CAAC,CAAC;AACrB,KAAK,CAAC,GAAG,IAAI,CAAC;AACd,KAAK;AACL,IAAI,CAAC,GAAG,UAAU,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;AACrC,IAAI,CAAC,CAAC;AACN,GAAG,MAAM;AACT,GAAG,WAAW,EAAE,CAAC;AACjB,GAAG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC,CAAC;AAC/D,GAAG;AACH,EAAE,MAAM;AACR,EAAE,IAAI,CAAC,0BAA0B,EAAE,CAAC,CAAC,CAAC;AACtC,EAAE;AACF,CAAC;AACD;AACA,SAAS,WAAW,GAAG;AACvB,CAAC,IAAI,KAAK,GAAGC,MAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC9C;AACA,CAAC,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;AACzB,EAAE,IAAI,CAACD,IAAE,CAAC,UAAU,CAAC,IAAI,GAAG,OAAO,CAAC,EAAE;AACtC,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAC1B,GAAG;AACH,EAAE;AACF,CAAC;AACD;AACO,SAAS,gBAAgB,CAAC,IAAI,EAAE;AACvC,CAAC,IAAI,IAAI,GAAG;AACZ,EAAE,GAAG,EAAE,OAAO;AACd,EAAE,IAAI,EAAEE,OAAY,EAAE;AACtB,EAAE,CAAC;AACH;AACA,CAACF,IAAE,CAAC,aAAa,CAAC,IAAI,GAAG,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;AACpE;AACA,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;AACxD;;ACrDA;AACA;AACA;AAMA;AACO,SAAS,cAAc,GAAG;AACjC,CAAC,IAAIA,IAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;AAC9B,EAAEG,aAAW,EAAE,CAAC;AAChB,EAAE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC,CAAC;AAC3D,EAAE,MAAM;AACR,EAAE,IAAI,CAAC,0BAA0B,EAAE,CAAC,CAAC,CAAC;AACtC,EAAE;AACF,CAAC;AACD;AACA,SAASA,aAAW,GAAG;AACvB,CAAC,IAAI,KAAK,GAAGF,MAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;AAC3C;AACA,CAAC,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;AACzB,EAAE,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;AAC3C,EAAE,IAAI,CAACD,IAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;AAChC,GAAGA,IAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AACvB,GAAG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;AACxD,GAAG;AACH,EAAE;AACF;;AC5BA;AACA;AACA;AAQA;AACA,IAAI,UAAU,CAAC;AACf;AACA,SAAS,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE;AACpC,CAAC,OAAO,YAAY,CAAC,OAAO,EAAE,QAAQ,EAAE;AACxC,EAAE,MAAM,EAAE,UAAU;AACpB,EAAE,OAAO,EAAE;AACX,GAAG;AACH,IAAI,MAAM,EAAE,MAAM;AAClB,IAAI,OAAO,EAAE;AACb,KAAK;AACL,MAAM,GAAG,EAAE,6BAA6B,EAAE,KAAK,EAAE,GAAG;AACpD,MAAM;AACN,KAAK;AACL,IAAI;AACJ,GAAG;AACH,EAAE,CAAC,CAAC;AACJ,CAAC;AACD;AACO,SAAS,cAAc,CAAC,OAAO,EAAE;AACxC,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;AAC1C,CAAC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AACzC,EAAE,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,GAAG,OAAO,CAAC;AAC1D;AACA,EAAE,UAAU,GAAGI,MAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACpC,EAAE,IAAIJ,IAAE,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE;AACjC,GAAG,IAAI,OAAO,CAAC;AACf,GAAG,IAAI,OAAO,IAAI,QAAQ,EAAE;AAC5B,IAAI,MAAM,UAAU,GAAGA,IAAE,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC;AACvD,KAAK,WAAW,GAAGA,IAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AACrD;AACA,IAAI,IAAI,UAAU,IAAI,WAAW,EAAE;AACnC,KAAK,OAAO,GAAG;AACf,MAAM,GAAG,EAAE,UAAU;AACrB,MAAM,IAAI,EAAE,WAAW;AACvB,MAAM,CAAC;AACP,KAAK;AACL,IAAI;AACJ;AACA,GAAG,MAAM,MAAM,GAAG,OAAO,GAAG,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;AAC9F;AACA,GAAG,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,KAAK;AAC/B,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;AACxC,IAAI,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACxB,IAAI,CAAC,CAAC;AACN;AACA,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,YAAY;AACzC,IAAI,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;AAC1B,IAAI,MAAM,MAAM,GAAG,KAAK,GAAG,OAAO,GAAG,MAAM,CAAC;AAC5C;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,iBAAiB,EAAE,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACrF,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7D;AACA,IAAI,OAAO,CAAC;AACZ,KAAK,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK;AAClC,KAAK,CAAC,CAAC;AACP,IAAI,CAAC,CAAC;AACN,GAAG,MAAM;AACT,GAAG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,4BAA4B,GAAG,UAAU,CAAC,CAAC,CAAC;AACrE,GAAG,MAAM,CAAC,4BAA4B,GAAG,UAAU,EAAC;AACpD,GAAG;AACH,EAAE,CAAC;AACH;;ACxEA;AACA;AACA;AACA;AACA,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B;AACA,MAAM,QAAQ,GAAG,kBAAkB,CAAC;AACpC;AACA,SAAS,aAAa,CAAC,IAAI,EAAE;AAC7B;AACA,CAAC,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,GAAG,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;AACxE,CAAC,IAAI,WAAW,GAAG,EAAE,CAAC,YAAY,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AAClD,CAAC,IAAI,MAAM,GAAG,WAAW,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;AAC9D;AACA,CAAC,IAAI,MAAM,EAAE;AACb,EAAE,OAAO,WAAW,CAAC,IAAI,CAAC;AAC1B,EAAE;AACF,CAAC;AACD;AACA,SAAS,UAAU,GAAG;AACtB,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;AAC3C;AACA,CAAC,IAAI,iBAAiB,GAAG,EAAE,CAAC;AAC5B,CAAC,IAAI,WAAW,GAAG,EAAE,CAAC;AACtB,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;AACjD,EAAE,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACxB,EAAE,IAAI,UAAU,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;AACvC,EAAE,IAAI,UAAU,EAAE;AAClB,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,0BAA0B,EAAE,CAAC,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7E,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrD,GAAG;AACH,EAAE;AACF;AACA,CAAC,OAAO,CAAC;AACT,EAAE,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/B;AACA;AACA;AACA,EAAE,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACzB;AACA;AACA,IAAI,CAAC,CAAC;AACN,CAAC;AACD;AACO,SAAS,uBAAuB,CAAC,OAAO,EAAE;AACjD,CAAC,OAAO;AACR,EAAE,IAAI,EAAE,2BAA2B;AACnC;AACA,EAAE,SAAS,CAAC,EAAE,EAAE;AAChB,GAAG,IAAI,EAAE,KAAK,QAAQ,EAAE;AACxB,IAAI,OAAO,EAAE,CAAC;AACd,IAAI;AACJ;AACA,GAAG,OAAO,IAAI,CAAC;AACf,GAAG;AACH;AACA,EAAE,IAAI,CAAC,EAAE,EAAE;AACX,GAAG,IAAI,EAAE,KAAK,QAAQ,EAAE;AACxB,IAAI,OAAO,UAAU,EAAE,CAAC;AACxB,IAAI;AACJ;AACA,GAAG,OAAO,IAAI,CAAC;AACf,GAAG;AACH,EAAE;AACF;AACA;;ACnEA;AACA;AACA;AAKA;AACA,MAAM,GAAG,GAAG,OAAO,CAAC,0BAA0B,CAAC,CAAC;AAChD,MAAM,CAAC,MAAM,CAAC,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;AAIjD;AACA,MAAM,cAAc,GAAG;AACvB,CAAC,IAAI,EAAE,KAAK;AACZ,CAAC,UAAU,EAAE,aAAa;AAC1B,CAAC,SAAS,EAAE;AACZ,EAAE,MAAM,EAAE,QAAQ;AAClB,EAAE;AACF,CAAC,CAAC;AACF;AACA,MAAM,kBAAkB,GAAG;AAC3B,CAAC,IAAI,EAAE;AACP,EAAE,SAAS,EAAE,MAAM;AACnB,EAAE,aAAa,EAAE,aAAa;AAC9B,EAAE;AACF,CAAC,CAAC;AACF;AACA,MAAM,SAAS,GAAG,cAAc,CAAC;AACjC;AACO,eAAe,OAAO,CAAC,OAAO,EAAE,KAAK,GAAG,KAAK,EAAE;AACtD,CAAC,IAAI,CAACA,IAAE,CAAC,UAAU,CAAC,cAAc,CAAC,EAAE;AACrC,EAAE,IAAI,CAAC,CAAC,MAAM,EAAE,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5C,EAAE;AACF,CAAC,IAAI,SAAS,GAAG,kBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AACrD,CAAC,IAAI,CAAC,SAAS,EAAE;AACjB,EAAE,IAAI,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC;AACrD,EAAE;AACF;AACA,CAAC,IAAI,OAAO,EAAE;AACd,EAAE,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,cAAc,EAAE,OAAO,CAAC,CAAC;AACvD,EAAE,MAAM;AACR,EAAE,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,cAAc,CAAC,CAAC;AAC9C,EAAE;AACF;AACA,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,GAAG,OAAO,CAAC;AAClC;AACA,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,EAAE,cAAc,CAAC,SAAS,CAAC,CAAC;AACpE;AACA,CAAC,IAAI,YAAY,GAAG;AACpB,EAAE,KAAK,EAAE,SAAS;AAClB,EAAE,OAAO,EAAE;AACX,GAAG,uBAAuB,EAAE;AAC5B,GAAG,GAAG,CAAC;AACP,IAAI,UAAU;AACd,IAAI,OAAO,EAAE,CAAC,kBAAkB,EAAE,qBAAqB,CAAC;AACxD,IAAI,CAAC;AACL,GAAG;AACH,EAAE,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;AAClC,EAAE,CAAC;AACH;AACA,CAAC,IAAI,IAAI,EAAE;AACX,EAAE,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;AACxC,EAAE;AACF;AACA,CAAC,IAAI,aAAa,GAAG;AACrB,EAAE,IAAI,EAAE,IAAI,GAAG,oBAAoB,GAAG,iBAAiB;AACvD,EAAE,MAAM,EAAE,KAAK;AACf,EAAE,IAAI,EAAE,UAAU;AAClB,EAAE,SAAS,EAAE,CAAC,IAAI;AAClB,EAAE,OAAO,EAAE,SAAS;AACpB,EAAE,CAAC;AACH;AACA,CAAC,IAAI,KAAK,EAAE;AACZ,EAAE,IAAI,YAAY,GAAG;AACrB,GAAG,GAAG,YAAY;AAClB,GAAG,MAAM,EAAE,aAAa;AACxB,GAAG,CAAC;AACJ,EAAE,MAAM,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;AAC7C;AACA,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE,KAAK,IAAI;AAC/B,GAAG,QAAQ,KAAK,CAAC,IAAI;AACrB,IAAI,KAAK,KAAK;AACd,KAAK,OAAO,CAAC,GAAG,CAACK,OAAK,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC;AAC3D,KAAK,MAAM;AACX,IAAI,KAAK,OAAO;AAChB,KAAK,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB,KAAK,MAAM;AACX,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC,CAAC;AACL,EAAE,MAAM;AACR,EAAE,IAAI;AACN,GAAG,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AACpD,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;AACrC;AACA,GAAG,OAAO,CAAC,GAAG,CAACA,OAAK,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC;AACzD,GAAG,OAAO,CAAC,EAAE;AACb,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnB,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC;AACnC,GAAG;AACH,EAAE;AACF;;;;;;;;;;;;;"}